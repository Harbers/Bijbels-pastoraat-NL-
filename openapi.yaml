openapi: 3.1.0             # builder eist 3.1.0
info:
  title: Bijbelse Psalmen API
  version: "1.0"
  description: |
    Geeft berijmde psalmverzen (1773-berijming) op basis van psalm- en versnummer.
servers:
  - url: https://bijbels-pastoraat-nl.onrender.com

paths:
  /api/psalm:
    get:
      operationId: get_psalm_text
      summary: 'Berijmd psalmvers (standaard-route)'
      parameters:
        - name: psalm
          in: query
          description: Psalmnummer (1-150)
          required: true
          schema: { type: integer, minimum: 1, maximum: 150 }
        - name: vers
          in: query
          description: Versnummer binnen de psalm
          required: true
          schema: { type: integer, minimum: 1, maximum: 20 }
      responses:
        '200':
          description: Gevonden psalmvers
          content: { application/json: { schema: { $ref: '#/components/schemas/Psalm' } } }
        '404': { $ref: '#/components/responses/NotFound' }

  /api/debug/vers:
    get:
      operationId: get_berijmd_psalmvers
      summary: 'Berijmd psalmvers â€” scraping-route'
      parameters:
        - name: psalm
          in: query
          description: Psalmnummer (1-150)
          required: true
          schema: { type: integer, minimum: 1, maximum: 150 }
        - name: vers
          in: query
          description: Versnummer binnen de psalm
          required: true
          schema: { type: integer, minimum: 1, maximum: 20 }
      responses:
        '200':
          description: Gevonden psalmvers
          content: { application/json: { schema: { $ref: '#/components/schemas/Psalm' } } }
        '404': { $ref: '#/components/responses/NotFound' }

  /api/status:
    get:
      operationId: get_status
      summary: 'Health-check'
      responses:
        '200':
          description: API is bereikbaar
          content: { application/json: { schema: { $ref: '#/components/schemas/Status' } } }

components:
  schemas:
    Psalm:
      type: object
      required: [psalm, vers, text]
      properties:
        psalm: { type: integer }
        vers:  { type: integer }
        text:  { type: string, description: Berijmde tekst }
    Status:
      type: object
      properties:
        status: { type: string, example: ok }
    Error:
      type: object
      properties:
        detail: { type: string, example: Niet gevonden }

  responses:
    NotFound:
      description: Psalmvers niet gevonden
      content: { application/json: { schema: { $ref: '#/components/schemas/Error' } } }
