openapi: 3.1.0
info:
  title: Bijbels-Pastoraat-NL Backend
  version: "1.0.0"
  description: |
    API voor berijmde psalmverzen (1773) via psalmboek.nl.
    Endpoints:
      - GET /api/psalm?psalm={1..150}&vers={1..}
      - GET /api/psalm/max?psalm={1..150}
servers:
  - url: https://gpt-harbers.duckdns.org

paths:
  /api/psalm:
    get:
      summary: Haal exact één vers op uit berijming 1773
      operationId: getPsalmVers
      parameters:
        - in: query
          name: psalm
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 150
          description: Psalmnummer 1..150
        - in: query
          name: vers
          required: true
          schema:
            type: integer
            minimum: 1
          description: Versnummer 1..max
      responses:
        "200":
          description: Succes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PsalmVersResponse"
        "400":
          description: Vers buiten bereik
        "404":
          description: Niet gevonden
        "502":
          description: Fout bij bron

  /api/psalm/max:
    get:
      summary: Bepaal het maximale versnummer van een psalm (1773)
      operationId: getPsalmMax
      parameters:
        - in: query
          name: psalm
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 150
          description: Psalmnummer 1..150
      responses:
        "200":
          description: Succes
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PsalmMaxResponse"
        "502":
          description: Fout bij bron

components:
  schemas:
    PsalmVersResponse:
      type: object
      properties:
        psalm:
          type: integer
        vers:
          type: integer
        text:
          type: string
        bron:
          type: string
          format: uri
      required: [psalm, vers, text, bron]

    PsalmMaxResponse:
      type: object
      properties:
        psalm:
          type: integer
        max_vers:
          type: integer
        bron:
          type: string
          format: uri
      required: [psalm, max_vers, bron]
